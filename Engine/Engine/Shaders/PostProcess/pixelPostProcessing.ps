Texture2D    Texture[2]; // Scenemap, bloomMap 
SamplerState SampleType[2]; // wrap,clamp 	

uniform int   u_applyBloom;
uniform float u_bloomIntensity;

struct PixelInputType
{
    float4 position : SV_POSITION;
    float2 texCoord : TEXCOORD0;		
};

float4 CalculateBloomColor(float2 texCoord)
{
	return Texture[1].Sample(SampleType[1], texCoord);
}

float4 Main(PixelInputType input) : SV_TARGET
{          
	float4 bloomColor = float4(0,0,0,0);
	
	float4 baseColor = Texture[0].Load(int3(input.position.xy,0));
	
	if (u_applyBloom == 1)
		bloomColor = CalculateBloomColor(input.texCoord);
	
	return baseColor + (bloomColor * u_bloomIntensity);
}






























